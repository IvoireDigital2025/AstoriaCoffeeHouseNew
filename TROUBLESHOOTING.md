# Railway Deployment Troubleshooting

## Build Error Fix: "Cannot find package '@vitejs/plugin-react'"

This error occurs when Railway tries to build the project and can't find required dependencies. Here's the fix:

### Solution 1: Use Development Mode (Recommended)

1. **Update railway.json** to use development mode:
   ```json
   {
     "deploy": {
       "startCommand": "npm run dev"
     }
   }
   ```

2. **Set environment variables in Railway**:
   ```
   NODE_ENV=development
   SESSION_SECRET=coffee-pro-secure-session-key
   ADMIN_PASSWORD=your-secure-admin-password
   ```

3. **Redeploy**: Railway will run in development mode with all dependencies

### Solution 2: Fix Build Dependencies

1. **Check package.json**: Ensure all Vite plugins are in dependencies (not devDependencies)

2. **Required dependencies**:
   ```bash
   npm install --save @vitejs/plugin-react @replit/vite-plugin-runtime-error-modal @replit/vite-plugin-cartographer
   ```

3. **Update railway.json** for production:
   ```json
   {
     "deploy": {
       "startCommand": "npm install && npm run build && npm start"
     }
   }
   ```

### Solution 3: Alternative Hosting Platforms

If Railway continues to have issues:

#### **Vercel (Recommended Alternative)**
1. Connect GitHub repo to Vercel
2. Set environment variables
3. Deploy automatically

#### **Render**
1. Connect GitHub repo
2. Set build command: `npm run build`
3. Set start command: `npm start`

## Common Issues & Solutions

### Database Connection Issues
- **Problem**: Database connection fails
- **Solution**: Check `DATABASE_URL` in Railway variables

### Admin Login Issues
- **Problem**: Can't access admin dashboard
- **Solution**: Verify `ADMIN_PASSWORD` is set correctly

### QR Code Issues
- **Problem**: QR codes don't work
- **Solution**: Ensure location services are enabled on mobile devices

### Location Validation Issues
- **Problem**: "Not within range" errors
- **Solution**: Check store coordinates in `server/routes.ts` (currently set to Astoria location)

## Environment Variables Checklist

Make sure these are set in Railway:
- ✅ `DATABASE_URL` (auto-generated by Railway PostgreSQL)
- ✅ `SESSION_SECRET` (your secure key)
- ✅ `ADMIN_PASSWORD` (your admin password)
- ✅ `NODE_ENV` (development or production)

## Post-Deployment Checklist

After successful deployment:
1. ✅ Visit your Railway app URL
2. ✅ Test the home page loads
3. ✅ Access admin dashboard at `/admin`
4. ✅ Download both QR codes
5. ✅ Test QR code scanning (if near store location)
6. ✅ Verify database is working (check customers tab)

## Support Resources

- **Railway Docs**: https://docs.railway.app
- **Railway Discord**: https://discord.gg/railway
- **GitHub Issues**: Create an issue in your repository

Your Coffee Pro website should work perfectly once deployed correctly!